<!-- resources/sakai_create_uploads.vm, use with org.sakaiproject.tool.content.ResourcesHelperAction.java -->
<div class="portletBody specialLink">
## begin OCW integration script and css loads for modal dialog 
## omit based on server setting)
	<script type ="text/javascript" src ="/sakai-content-tool/modal/js/jquery-1.3.1.min.js">
	
	</script>
	<script src='/sakai-content-tool/modal/js/jquery.simplemodal.js' type='text/javascript'>
	</script>
	<script src='/sakai-content-tool/modal/js/license.js' type='text/javascript'>
	</script>
	<!-- IE 6 hacks -->
	<!--[if lt IE 7]>
		<link type='text/css' href='/sakai-content-tool/modal/css/modal_ie.css' rel='stylesheet' media='screen' />
	<![endif]-->
	
	<link type='text/css' href='/sakai-content-tool/modal/css/modal.css' rel='stylesheet' media='screen' />

<script type="text/javascript">
$(document).ready(function(){
    $('.setLicense').live("click",function(x){
        $('#basicModalContent').modal({
            zIndex: 2001,
			position: ["5%","25%"]
        });
		if ($(this).parent('p').children('.setLicenseVal').val() !==''){
			var prevLicense = ($(this).parent('p').children('.setLicenseVal').val() ).split('-s')[0];
			$('tr#' + prevLicense).addClass("selectedLic")
			$('tr#' + prevLicense).children('td.icon').children('input').attr('checked','checked')
		}; 
		that =$(this).parent('p').children('.setLicenseVal')
	});



});
</script>
## end OCW integration script and css loads for modal dialog 
	
	<h3>
		$tlang.getString("create.uploads")
	</h3>
	#if ($itemAlertMessage)
		<div class="alertMessage">$tlang.getString("label.alert") $validator.escapeHtml($itemAlertMessage)</div>
		<div style="display:block;clear:both" ></div>
	#end
	<p class="instruction">
		$tlang.getString("instr.uploads")
	</p>
	<div class="breadCrumb">
	<h4>
		$tlang.getString("gen.location")
		##<img src = "#imageLink($contentTypeImageService.getContentTypeImage("folder"))" border="0"  alt="folder" />
		#foreach ($folder in $model.collectionPath)
			$folder.name /
		#end
		</h4>
	</div>
	<form name="addContentForm" id="addContentForm" method="post" action="#toolForm("ResourcesHelperAction")"  enctype="multipart/form-data">
		<input type="hidden" name="fileCount" id="fileCount" value="$pipes.size()" />
		#set($lastIndex = $pipes.size() - 1)
		<input type="hidden" name="lastIndex" id="lastIndex" value="$lastIndex" />
		<div id="fileInputDiv">
			#set($i = -1)
			#foreach($pipe in $pipes)
				
				#set($prev = $i)
				#set($i = $i + 1)
				#set($next = $i + 1)
				
				<div id="contentDiv${DOT}$i" class="actionitem highlightPanel">
					<input type="hidden" name="exists${DOT}$i" id="exists${DOT}$i" value="true" />
					<p class="shorttext" style="border:none">
						<label for="content${DOT}$i">$tlang.getString("label.upload")</label>
						<input type="file" name="content${DOT}$i" id="content${DOT}$i" class="upload" />
					</p>
					<p class="shorttext" style="border:none">
						<label for="displayName${DOT}$i">$tlang.getString("label.display")</label> 
						<input type="text" id="displayName${DOT}$i" name="displayName${DOT}$i" style="width:17em"/> 
						<a class="indnt2" href="#" id="propsTrigger${DOT}$i">$tlang.getString("edit.show")</a>
## begin OCW set license link, hidden input and image		
						| <a href="#" id="setLicense${DOT}$i" class="setLicense">Set License</a>
						<input type="hidden" class="setLicenseVal"/>
						<img src="/sakai-content-tool/images/blank.png" class="licenseIcon" style="vertical-align:middle"/> 
## end OCW set license link, hidden input and image
						<a class="indnt2" href="#" id="removeTrigger${DOT}$i" >
							<img src="#imageLink("sakai/cross.png")" title="$tlang.getString("edit.remove")" />
						</a>

						<input type="hidden" id="prev${DOT}$i" name="prev${DOT}$i" value="#if($prev >= 0)${prev}#end" />
						<input type="hidden" id="next${DOT}$i" name="next${DOT}$i" value="#if($next < $pipes.size())${next}#end" />
					</p>
				</div>
				<div id="propertiesDiv${DOT}$i" style="display:none;">
					#parse("/vm/resources/sakai_properties.vm")
					<hr class="itemSeparator" />
				</div>
			#end
		</div>
		
## begin OCW integration block - modal dialog content framework
		<div id="basicModalContent" style="display:none" class="specialLink">
			<div id="license-setter">
				<h3>Set licenses</h3>
				<table border="0" cellpadding="0" cellspacing="0">
					<tr>
						<td style="padding:0 5px;text-align:right" id="helpmelink">
							<span id="holder" />
							<a href="#">Help me decide</a>
						</td>
						<td rowspan="7" id="helpercont">
							<div id="licenseInfo" style="display:none">
								<ul>
									<li id="help-attr">Explanation: Attribution</li>
									<li id="help-attr_share">Explanation: Attribution Share Alike</li>
									<li id="help-attr_noder">Explanation: Attribution No Derivatives</li>	
									<li id="help-attr_nocom">Explanation: Attribution Non-Commercial</li>
									<li id="help-attr_nocom_share">Explanation: Attribution Non-Commercial Share Alike</li>
									<li id="help-attr_nocom_noder">Explanation: Attribution Non-Commercial No Derivatives</li>
								</ul>
							</div>
							<div id="helper" style="display:none">
								<h4>Allow commercial uses of your work?</h4>
								<ul class="choices">
									<li>
										<input checked="checked" name="field_commercial" value="y" id="comm_y" type="radio" />
										<label for="comm_y">
												Yes
											</label>
									</li>
									<li>
										<input name="field_commercial" value="n" id="comm_n" type="radio" />
										<label for="comm_n">
												No
											</label>
									</li>
								</ul>
								<h4>Allow modifications of your work?</h4>
								<ul class="choices">
									<li>
										<input checked="checked" name="field_derivatives" value="der-y" id="der_y" type="radio" />
										<label for="der_y">
												Yes
											</label>
									</li>
									<li>
										<input name="field_derivatives" value="sa" id="der_s" type="radio" />
										<label for="der_s">
											<span>Yes, as long as others share alike</span>
										</label>
									</li>
									<li>
										<input name="field_derivatives" value="n" id="der_n" type="radio" />
										<label for="der_n">
												No
											</label>
									</li>
								</ul>
								<h4>Jurisdiction of your license</h4>
								<select name="field_jurisdiction">
									<option value="">Unported</option>
									<option value="ar">Argentina</option>
									<option value="at">Austria</option>
									<option value="au">Australia</option>
									<option value="be">Belgium</option>
									<option value="bg">Bulgaria</option>
									<option value="br">Brazil</option>
									<option value="ca">Canada</option>
									<option value="ch">Switzerland</option>
									<option value="cl">Chile</option>
									<option value="cn">China Mainland</option>
									<option value="co">Colombia</option>
									<option value="de">Germany</option>
									<option value="dk">Denmark</option>
									<option value="ec">Ecuador</option>
									<option value="es">Spain</option>
									<option value="fi">Finland</option>
									<option value="fr">France</option>
									<option value="gr">Greece</option>
									<option value="gt">Guatemala</option>
									<option value="hk">Hong Kong</option>
									<option value="hr">Croatia</option>
									<option value="hu">Hungary</option>
									<option value="il">Israel</option>
									<option value="in">India</option>
									<option value="it">Italy</option>
									<option value="jp">Japan</option>
									<option value="kr">Korea</option>
									<option value="lu">Luxembourg</option>
									<option value="mk">Macedonia</option>
									<option value="mt">Malta</option>
									<option value="mx">Mexico</option>
									<option value="my">Malaysia</option>
									<option value="nl">Netherlands</option>
									<option value="no">Norway</option>
									<option value="nz">New Zealand</option>
									<option value="pe">Peru</option>
									<option value="ph">Philippines</option>
									<option value="pl">Poland</option>
									<option value="pr">Puerto Rico</option>
									<option value="pt">Portugal</option>
									<option value="ro">Romania</option>
									<option value="rs">Serbia</option>
									<option value="scotland">UK: Scotland</option>
									<option value="se">Sweden</option>
									<option value="sg">Singapore</option>
									<option value="si">Slovenia</option>
									<option value="tw">Taiwan</option>
									<option value="uk">UK: England &amp; Wales</option>
									<option value="us" selected="selected">United States</option>
									<option value="za">South Africa</option>
								</select>
							</div>
						</td>
					</tr>
					<tr>
						<td>
							<table id="licenseIcons" border="0" cellpadding="0" cellspacing="0">
								<tr id="attr">
									<td class="icon">
										<img src="/sakai-content-tool/images/attr.png" />
										<input type="radio" name="license" id="attr-s" />
									</td>
									<td class="label">
										<label for="xxattr-s">Attribution</label>
									</td>
								</tr>
								<tr id="attr_share">
									<td class="icon">
										<img src="/sakai-content-tool/images/attr_share.png" />
										<input type="radio" name="license" id="attr_share-s" />
									</td>
									<td class="label">
										<label for="xxattr-share-s">Attribution Share Alike</label>
									</td>
								</tr>
									<tr id="attr_noder">
	
											<td class="icon">	
												<img src="/sakai-content-tool/images/attr_noder.png" />	
												<input type="radio" name="license" id="attr_noder-s" />	
											</td>	
											<td class="label">	
												<label for="xxattr-noder-s">Attribution No Derivatives</label>	
											</td>	
										</tr>	
										<tr id="attr_nocom">	
											<td class="icon">	
												<img src="/sakai-content-tool/images/attr_nocom.png" />	
												<input type="radio" name="license" id="attr_nocom-s" />	
											</td>	
											<td class="label">	
												<label for="xxattr-nocom-s">Attribution Non-Commercial</label>
											</td>	
										</tr>	
										<tr id="attr_nocom_share">	
											<td class="icon">	
												<img src="/sakai-content-tool/images/attr_nocom_share.png" />	
												<input type="radio" name="license" id="attr_nocom_share-s" />	
											</td>	
											<td class="label">	
												<label for="xxattr-nocom-share-s">Attribution Non-Commercial Share Alike</label>
											</td>	
										</tr>	
										<tr id="attr_nocom_noder">	
											<td class="icon">	
												<img src="/sakai-content-tool/images/attr_nocom_noder.png" />	
												<input type="radio" name="license" id="attr_nocom_noder-s" />	
											</td>	
											<td class="label">	
												<label for="xxattr-nocom-noder-s">Attribution Non-Commercial No Derivatives</label>
											</td>	
										</tr>	
									</table>	
								</td>	
							</tr>	
						</table>	
					</div>	
					<p>	
						<input type="button" value="Done" id="setLicense" class="simplemodal-close" disabled=s/>	
						<input type="button" value="Cancel"  class="simplemodal-close"/>	
					</p>	
				</div>
## end OCW integration block - modal dialog content framework

<span id="licenseHolder" class="highlight"></span>	## debug - value set in modal dialog	
		
		
		<p class="act">
			<a href="#" onclick="javascript:addFileInput();return false">$tlang.getString("label.addfile")</a>

## begin OCW link to set licenses for all items being created
			| <a href="#" id="setLicenseAll">Set License for All</a>
## end OCW link to set licenses for all items being created
		</p>
		#if ($model.resourceTypeDef.hasNotificationDialog())
			#if($model.isDropbox())
				#if($model.userIsMaintainer() || $dropboxNotificationAllowed)
					<p class="act">
						<input type="checkbox" name="notify_dropbox" id="notify_dropbox" value="true" /> 
						<label for="notify_dropbox">
							#if($model.isCourseSite())
								#if($model.userIsMaintainer())
									$tlang.getString("notify.student")
								#else
									$tlang.getString("notify.instructor")
								#end
							#else
								#if($model.userIsMaintainer())
									$tlang.getString("notify.access")
								#else
									$tlang.getString("notify.maintain")
								#end
							#end
						</label>
					</p>
				#end
			#elseif($model.isUserSite())
			#else
				<p class="shorttext">
					<label for="notify">
						$tlang.getString("gen.email1")
					</label>	
					<select name="notify" id="notify">
						<option value="r">$tlang.getString("gen.email2")</option>
						<option value="o">$tlang.getString("gen.email3")</option>
						<option value="n" selected="selected">$tlang.getString("gen.email4")</option>
					</select>
				</p>	
			#end
		#end
		
		<p class="act">
			<input type="button" class="active" name="savechanges" id="saveChanges" onclick="javascript:showNotif('submitnotifxxx','saveChanges','addContentForm');document.getElementById('addContentForm').action='#toolLink("ResourcesHelperAction" "doUpload")&flow=save';submitform('addContentForm');" value="$tlang.getString("label.finupl")" accesskey="s" />
			<input type="button" name="cancel" onclick="javascript:document.getElementById('addContentForm').action='#toolLink("ResourcesHelperAction" "doCancel")';submitform('addContentForm');" value="$tlang.getString("label.cancel")" accesskey="x" />
			<span id="submitnotifxxx" class="messageProgress" style="visibility:hidden">$tlang.getString("processmessage.file")</span>
		</p>
		#if($upload_limit)
			<p class="instruction">
				$upload_limit
			</p>
		#end
	</form>
</div>
#parse("/vm/resources/sakai_properties_scripts.vm")
